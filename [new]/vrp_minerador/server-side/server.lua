-----------------------------------------------------------------------------------------------------------------------------------------
-- VRP
-----------------------------------------------------------------------------------------------------------------------------------------
local Tunnel = module("vrp","lib/Tunnel")
local Proxy = module("vrp","lib/Proxy")
vRP = Proxy.getInterface("vRP")
-----------------------------------------------------------------------------------------------------------------------------------------
-- CONNECTION
-----------------------------------------------------------------------------------------------------------------------------------------
cRP = {}
Tunnel.bindInterface("vrp_minerador",cRP)
vCLIENT = Tunnel.getInterface("vrp_minerador")
-----------------------------------------------------------------------------------------------------------------------------------------
-- VARIABLES
-----------------------------------------------------------------------------------------------------------------------------------------
local saveList = {}
local mineradorList = {}
-----------------------------------------------------------------------------------------------------------------------------------------
-- VARIABLES
-----------------------------------------------------------------------------------------------------------------------------------------
function mineradorMakeList(status)
	mineradorList = {
			[1] = { 2955.65,2767.19,39.99,200.17 },
			[2] = { 2933.38,2772.88,39.22,43.74 },
			[3] = { 2934.2,2783.51,39.37,6.3 },
			[4] = { 2943.95,2817.7,42.84,316.52 },
			[5] = { 2949.52,2820.22,42.88,306.9 },
			[6] = { -921.81,-1160.57,4.77,211.14 },
			[7] = { -1075.81,-1273.09,5.85,27.44 },
			[8] = { 2938.09,2757.71,44.03,171.95 },
			[9] = { 2931.7,2761.73,44.94,59.88 },
			[10] = { 2944.13,2756.31,43.59,234.31 },
			[11] = { 2955.71,2756.76,44.32,101.76 },
			[12] = { 2948.37,2731.93,45.93,221.43 },
			[13] = { 2975.76,2796.02,41.05,234.99 },
			[14] = { 2981.66,2787.84,40.94,223.63 },
			[15] = { 2981.38,2783.4,39.85,203.3 },
			[16] = { 2992.51,2722.03,56.94,349.63 },
			[17] = { 2995.85,2724.07,57.04,285.41 },
			[18] = { 2984.53,2701.92,64.15,148.06 },
			[19] = { 2978.89,2694.28,63.98,137.58 },
			[20] = { 2944.4,2821.36,43.3,234.06 },
			[21] = { 2958.75,2818.6,43.02,279.55 },
			[22] = { 2926.74,2814.54,45.21,138.55 },
			[23] = { 2920.21,2798.05,41.07,274.24 },
			[24] = { 2924.76,2794.23,40.72,243.41 },
			[25] = { 2938.74,2770.05,39.09,254.01 },
			[26] = { 2939.08,2771.39,39.25,79.31 },
			[27] = { 2938.28,2774.21,39.73,338.99 },
			[28] = { 2939.32,2743.4,43.4,165.49 },
			[29] = { 2940.94,2740.32,44.03,271.13 },
			[30] = { 890.08,2331.14,48.12,17.93 },
			[31] = { 892.51,2333.19,48.23,318.51 },	
			[32] = { 907.44,2338.28,48.56,325.71 },
			[33] = { 923.79,2333.61,48.48,272.51 },
			[34] = { 935.63,2278.79,47.71,108.66 },
			[35] = { 944.79,2269.4,48.58,243.46 },
			[36] = { 979.16,2254.69,49.52,259.72 },
			[37] = { 1152.16,2084.39,55.95,204.57 },
			[38] = { 1186.26,2173.51,53.64,316.28 },
			[39] = { 1223.76,2388.47,66.0,306.23 },
			[40] = { 1431.54,2539.58,40.11,186.09 },
			[41] = { 1483.64,2398.68,49.32,267.64 },
			[42] = { 1498.43,2546.1,48.51,341.13 },
			[43] = { 1504.72,2581.55,46.28,343.78 },
			[44] = { 1502.01,2607.24,45.25,5.14 },
			[45] = { 1498.18,2617.82,45.01,25.24 },
			[46] = { 1607.55,2775.31,40.46,337.84 },
			[47] = { 1624.01,2787.52,41.49,317.8 },
			[48] = { 1622.12,2851.81,40.34,10.21 },
			[49] = { 1625.97,2860.13,41.74,320.3 },
			[50] = { 1639.54,2877.89,42.25,322.94 },
			[51] = { 1641.74,2886.14,42.53,337.85 },
			[52] = { 1647.61,2886.28,42.87,26.54 },
			[53] = { 1811.82,2915.28,45.55,142.94 },
			[54] = { 1821.86,2918.31,45.43,240.08 },
			[55] = { 1819.34,2925.88,45.5,34.49 },
			[56] = { 1841.61,2920.52,44.81,249.25 },
			[57] = { 1905.66,2843.52,47.13,220.02 },
			[58] = { 1905.57,2830.8,47.32,205.97 },
			[59] = { 1901.91,2829.08,46.41,120.7 },
			[60] = { 1925.96,2793.57,45.62,231.01 },
			[61] = { 1932.67,2795.69,46.26,316.31 },
			[62] = { 1934.35,2792.6,46.88,96.25 },
			[63] = { 1933.88,2790.18,46.37,74.31 },
			[64] = { 1965.76,2746.26,45.65,229.06 },
			[65] = { 1970.82,2742.76,46.19,219.61 },
			[66] = { 1984.45,2725.04,45.98,214.42 },
			[67] = { 1988.97,2718.22,46.32,279.56 },
			[68] = { 2009.14,2695.3,47.27,228.42 },
			[69] = { 2018.35,2693.73,47.68,346.96 },
			[70] = { 2029.49,2667.99,47.19,190.07 },
			[71] = { 2055.86,2689.94,47.39,303.27 },
			[72] = { 2062.06,2694.48,47.28,307.35 },
			[73] = { 2068.66,2699.22,47.28,301.46 },
			[74] = { 2075.83,2704.56,47.45,292.58 },
			[75] = { 2112.81,2731.35,49.29,85.07 },
			[76] = { 2125.42,2739.28,49.5,281.91 },
			[77] = { 2134.59,2743.51,49.49,310.02 },
			[78] = { 2155.15,2750.68,48.37,326.46 },
			[79] = { 2160.36,2752.59,47.99,290.09 },
			[80] = { 2163.05,2760.03,48.3,354.82 },
			[81] = { 2185.66,2769.14,46.13,292.92 },
			[82] = { 2197.42,2781.72,45.66,314.72 },
			[83] = { 2205.34,2793.18,45.93,322.02 },
			[84] = { 2212.88,2801.58,45.48,325.28 },
			[85] = { 2220.36,3154.64,51.54,180.81 },
			[86] = { 2230.97,3159.02,51.17,299.8 },
			[87] = { 2230.81,3189.47,50.6,44.16 },
			[88] = { 2203.32,3235.02,48.21,45.61 },
			[89] = { 2138.75,3289.62,48.22,76.33 },
			[90] = { 2126.7,3283.86,47.07,56.52 },
			[91] = { 2099.31,3302.92,45.83,70.13 },
			[92] = { 2101.39,3297.46,46.94,275.86 },
			[93] = { 2127.83,3315.38,46.7,286.33 },
			[94] = { 2666.62,3582.15,50.95,324.66 },
			[95] = { 2824.36,3567.91,52.72,268.07 },
			[96] = { 2834.47,3681.36,50.03,356.46 },
			[97] = { 2865.5,3793.54,44.58,343.92 },
			[98] = { 2868.68,3805.91,46.49,223.75 },
			[99] = { 2865.35,3857.5,48.42,335.64 },
			[100] = { 2903.82,3906.1,52.23,330.84 },
			[101] = { 2875.24,3948.85,52.9,21.71 },
			[102] = { 2852.73,3955.13,49.85,28.13 },
			[103] = { 2830.52,3973.49,47.35,95.53 },
			[104] = { 2825.85,3966.79,46.88,151.82 },
			[105] = { 2860.35,4017.69,47.14,143.34 },
			[106] = { 2849.23,4023.98,46.72,114.76 },
			[107] = { 2845.2,4084.41,48.87,257.2 },
			[108] = { 2846.84,4091.05,48.43,358.03 },
			[109] = { 2780.01,4159.0,44.34,49.26 },
			[110] = { 2921.5,4808.61,62.85,344.66 },
			[111] = { 2866.02,4915.35,64.13,170.41 },
			[112] = { 2863.78,5006.4,32.04,347.68 },
			[113] = { 2866.6,5006.38,32.46,233.69 },
			[114] = { 2900.96,5022.88,31.98,24.79 },
			[115] = { 2931.31,5027.82,31.56,330.33 },
			[116] = { 2944.21,5031.85,30.56,289.78 },
			[117] = { 2956.73,5031.21,30.11,252.59 },
			[118] = { 2974.97,5028.28,30.19,262.81 },
			[119] = { 3034.98,5030.7,26.29,262.88 },
			[120] = { 3185.8,5036.52,20.51,283.23 },
			[121] = { 3528.26,4542.87,50.86,106.79 },
			[122] = { 3531.09,4539.86,50.57,238.37 },
			[123] = { 3543.22,4539.91,48.36,271.29 },
			[124] = { 3549.48,4554.99,48.36,357.21 },
			[125] = { 3671.81,4466.52,26.11,235.67 },
			[126] = { 3764.52,4480.82,5.72,308.14 },
			[127] = { 3769.15,4493.67,5.72,343.43 },
			[128] = { 3770.69,4504.98,6.37,174.4 },
			[129] = { 3836.72,4388.55,5.41,159.03 },
			[130] = { 3839.02,4386.43,5.48,248.7 },
			[131] = { 3857.91,4370.61,6.28,226.93 },
			[132] = { 3862.69,4358.13,6.59,204.99 },
			[133] = { 3864.19,4343.85,6.63,160.95 },
			[134] = { 3860.6,4323.26,7.38,107.47 },
			[135] = { 3858.87,4311.56,5.8,176.65 },
			[136] = { 3393.11,5478.17,20.61,335.39 },
			[137] = { 3391.68,5484.77,22.73,332.45 },
			[138] = { 1837.81,6423.39,42.35,238.27 },
			[139] = { 1826.15,6403.28,41.81,155.54 },
			[140] = { 1569.44,6637.69,3.42,25.99 },
			[141] = { 1571.65,6645.88,2.31,306.25 },
			[142] = { 1175.14,6557.2,3.03,282.19 },
			[143] = { 1145.73,6574.38,3.1,87.85 },
			[144] = { 993.02,6558.66,8.91,99.44 },
			[145] = { 946.79,6540.06,16.09,122.65 },
			[146] = { 912.24,6548.02,15.05,73.7 },
			[147] = { 631.76,6576.73,16.28,188.2 },
			[148] = { 622.3,6579.18,17.52,72.13 },
			[149] = { 516.17,6643.09,12.88,118.11 },
			[150] = { 502.97,6650.02,11.97,67.73 },
			[151] = { 408.37,6763.71,3.83,41.22 },
			[152] = { 404.46,6773.32,3.68,59.95 },
			[153] = { 399.81,6777.0,3.67,86.24 },
			[154] = { 328.98,6830.71,8.18,46.77 },
			[155] = { 331.78,6850.84,7.06,37.55 },
			[156] = { 324.86,6864.72,6.55,40.36 },
			[157] = { 321.72,6878.03,5.7,125.94 },
			[158] = { 303.33,6886.06,5.65,69.36 },
			[159] = { 301.03,6894.46,4.91,22.87 },
			[160] = { 295.53,6928.25,3.31,350.37 },
			[161] = { 295.08,6941.98,3.64,356.01 },
			[162] = { 266.56,6976.26,3.2,36.46 },
			[163] = { 259.19,6981.09,3.4,55.39 },
			[164] = { -3.17,6997.76,1.78,136.1 },
			[165] = { -15.39,6979.39,2.22,147.53 },
			[166] = { -16.79,6969.82,2.4,168.05 },
			[167] = { -19.79,6953.83,2.02,171.1 },
			[168] = { -64.86,6830.5,1.82,255.03 },
			[169] = { -64.7,6821.67,2.0,184.42 },
			[170] = { -74.28,6777.85,2.05,170.84 },
			[171] = { -79.15,6765.16,2.26,192.67 },
			[172] = { -84.19,6749.43,2.43,178.34 },
			[173] = { -83.35,6744.64,2.73,177.36 },
			[174] = { -82.75,6738.92,2.78,183.21 },
			[175] = { -160.79,6616.48,3.63,140.39 },
			[176] = { -164.99,6609.19,3.56,151.39 },
			[177] = { -172.2,6590.76,3.96,49.62 },
			[178] = { -174.71,6588.52,4.16,165.47 },
			[179] = { -246.21,6528.88,2.13,159.34 },
			[180] = { -249.1,6522.56,2.34,185.03 },
			[181] = { -299.93,6489.23,4.58,135.1 },
			[182] = { -325.75,6473.85,1.79,129.32 },
			[183] = { -372.29,6445.06,1.59,115.58 },
			[184] = { -663.37,6126.25,3.52,162.6 },
			[185] = { -683.47,6026.83,4.67,190.32 },
			[186] = { -930.03,6041.2,4.26,149.79 },
			[187] = { -930.7,6033.59,3.43,175.72 },
			[188] = { -869.88,5959.04,7.26,253.43 },
			[189] = { -846.16,5919.51,5.38,233.25 },
			[190] = { -843.79,5917.93,5.65,239.18 },
			[191] = { -839.72,5916.17,5.64,254.2 },
			[192] = { -904.47,5541.62,6.65,192.9 },
			[193] = { -909.71,5533.58,7.16,129.78 },
			[194] = { -918.63,5526.26,7.21,185.53 },
			[195] = { -1178.19,5367.16,7.39,139.38 },
			[196] = { -1183.16,5367.72,7.39,90.46 },
			[197] = { -1188.65,5364.58,7.71,291.92 },
			[198] = { -1265.15,5317.57,9.54,83.44 },
			[199] = { -1375.99,5306.12,3.86,148.81 },
			[200] = { -1403.49,5196.51,2.52,174.34 },
			[201] = { -1750.99,5012.58,4.14,280.73 },
			[202] = { -1716.19,4988.3,10.9,219.43 },
			[203] = { -1735.62,4924.23,4.99,165.59 },
			[204] = { -1783.33,4857.92,7.14,150.28 },
			[205] = { -1833.72,4826.67,3.5,129.25 },
			[206] = { -1840.93,4820.9,3.37,97.9 },
			[207] = { -1723.42,4670.17,25.09,290.37 },
			[208] = { -1710.0,4674.0,26.02,298.01 },
			[209] = { -1652.29,4709.82,39.74,295.87 },
			[210] = { -1636.27,4692.22,39.28,225.24 },
			[211] = { -1567.48,4745.11,51.95,341.67 },
			[212] = { -1562.71,4475.13,18.44,179.1 },
			[213] = { -1544.95,4482.31,19.04,300.9 },
			[214] = { -1332.74,4483.46,23.8,281.49 },
			[215] = { -1208.81,4469.06,29.5,163.08 },
			[216] = { -968.04,4421.69,19.12,266.31 },
			[217] = { -960.72,4419.65,17.78,253.83 },
			[218] = { -908.73,4417.33,18.9,265.09 },
			[219] = { -906.14,4369.98,17.73,189.13 },
			[220] = { -944.71,4349.26,13.84,120.5 },
			[221] = { -947.91,4346.13,13.92,116.52 },
			[222] = { -954.78,4343.01,13.11,118.37 },
			[223] = { -1455.43,4310.11,2.42,21.84 },
			[224] = { -1463.36,4314.81,1.7,49.9 },
			[225] = { -1599.26,4366.64,2.46,22.26 },
			[226] = { -1601.4,4372.01,2.18,21.37 },
			[227] = { -1603.83,4379.13,1.62,1.67 },
			[228] = { -1617.16,4404.85,1.39,332.72 },
			[229] = { -1684.36,4461.78,2.04,22.71 },
			[230] = { -1687.37,4459.84,2.49,242.88 },
			[231] = { -1713.75,4462.39,2.65,61.13 },
			[232] = { -1721.98,4465.36,2.05,63.69 },
			[233] = { -1734.47,4468.95,1.77,68.55 },
			[234] = { -1740.26,4469.84,1.89,84.47 },
			[235] = { -1752.44,4480.25,1.37,37.52 },
			[236] = { -1934.11,4451.87,36.18,132.92 },
			[237] = { -2293.41,4352.2,15.54,181.71 },
			[238] = { -2300.66,4329.7,17.39,127.84 },
			[239] = { -2362.94,4279.03,11.16,265.37 },
			[240] = { -2408.22,4207.02,12.26,146.67 },
			[241] = { -2408.77,4202.47,11.46,273.21 },
			[242] = { -3171.06,1774.18,2.37,142.92 },
			[243] = { -3171.93,1784.83,2.1,344.24 },
			[244] = { -3159.27,1710.17,3.81,176.41 },
			[245] = { -3223.99,1341.07,2.42,154.01 },
			[246] = { -3224.25,1334.28,2.19,190.38 },
			[247] = { -3239.87,1265.09,3.16,257.37 },
			[248] = { -3216.01,1247.36,4.64,228.61 },
			[249] = { -3204.51,1256.54,4.97,310.11 },
			[250] = { -3226.84,1177.09,5.75,165.66 },
			[251] = { -3251.27,1108.85,2.63,163.07 },
			[252] = { -3254.86,1090.95,2.57,148.55 },
			[253] = { -3245.47,913.45,4.85,327.48 },
			[254] = { -3240.74,912.01,5.72,235.75 },
			[255] = { -3220.42,872.79,4.62,212.36 },
			[256] = { -3186.46,794.15,3.85,232.68 },
			[257] = { -3181.61,788.25,3.8,220.76 },
			[258] = { -3085.22,626.69,2.39,215.86 },
			[259] = { -3089.66,490.78,2.23,138.09 },
			[260] = { -3093.43,485.88,2.62,140.22 },
			[261] = { -3123.66,375.66,2.41,143.67 },
			[262] = { -3129.39,370.12,2.46,128.14 },
			[263] = { -2742.94,-24.67,14.61,264.87 },
			[264] = { -2735.78,-27.11,15.0,248.0 },
			[265] = { -2718.18,-40.81,15.96,212.42 },
			[266] = { -2710.02,-55.81,15.17,242.99 },
			[267] = { -2685.46,-83.01,16.05,226.19 },
			[268] = { -2682.32,-87.54,16.31,199.07 },
			[269] = { -2640.59,-128.29,19.31,239.6 },
			[270] = { -2637.34,-129.86,19.53,249.11 },
			[271] = { -2261.5,-356.49,13.48,241.8 },
			[272] = { -2249.27,-361.94,13.55,206.7 },
			[273] = { -735.78,4416.33,21.28,341.5 },
			[274] = { -376.0,4262.23,47.46,200.83 },
			[275] = { -377.67,4260.07,47.59,141.48 },
			[276] = { 846.51,4518.0,55.8,226.7 },
			[277] = { 849.36,4521.9,58.21,47.19 },
			[278] = { 890.47,4448.4,51.62,24.55 },
			[279] = { 896.35,4436.21,50.78,203.65 },
			[280] = { 934.73,4450.24,49.68,151.22 },
			[281] = { 954.86,4406.81,47.57,213.24 },
			[282] = { 1397.83,4508.52,54.38,295.75 },
			[283] = { 1403.72,4512.73,53.69,306.13 },
			[284] = { 1497.63,4537.39,53.31,215.52 },
			[285] = { 1531.8,4576.37,51.85,352.21 },
			[286] = { 1815.15,4551.26,33.87,229.88 },
			[287] = { 2237.33,4656.37,31.37,224.87 },
			[288] = { 2355.35,5567.67,40.33,17.49 },
			[289] = { 2360.71,5576.83,42.52,317.72 },

	}

	saveList = mineradorList
end
-----------------------------------------------------------------------------------------------------------------------------------------
-- THREADINITIAL
-----------------------------------------------------------------------------------------------------------------------------------------
Citizen.CreateThread(function()
	mineradorMakeList(false)
end)
-----------------------------------------------------------------------------------------------------------------------------------------
-- THREADTIMERS
-----------------------------------------------------------------------------------------------------------------------------------------
Citizen.CreateThread(function()
	while true do
		Citizen.Wait(120*60000)
		mineradorMakeList(true)
		Citizen.Wait(1000)
		TriggerClientEvent("vrp_minerador:insertBlips",-1,saveList)
		TriggerClientEvent("vrp_minerador:updateMineradorList",-1,saveList)
	end
end)
-----------------------------------------------------------------------------------------------------------------------------------------
-- minerador
-----------------------------------------------------------------------------------------------------------------------------------------
RegisterCommand("minerador",function(source,args,rawCommand)
	local user_id = vRP.getUserId(source)
	if user_id then
		local inService = vCLIENT.getMineradorStatus(source)
		if inService then
			vCLIENT.stopminerador(source)
		else
			vCLIENT.startminerador(source)
			TriggerClientEvent("vrp_minerador:insertBlips",source,saveList)
			TriggerClientEvent("vrp_minerador:updateMineradorList",source,saveList)
			TriggerClientEvent("Notify",source,"sucesso","VocÃª iniciou o emprego de <b>Minerador</b>.",3000)
		end
	end
end)
-----------------------------------------------------------------------------------------------------------------------------------------
-- PAYMENTMETHOD
-----------------------------------------------------------------------------------------------------------------------------------------
function cRP.paymentMethod(MineradorId)
	local source = source
	local user_id = vRP.getUserId(source)
	if user_id then
		if vRP.computeInvWeight(user_id) + 1 > vRP.getBackpack(user_id) then
			TriggerClientEvent("Notify",source,"negado","Mochila cheia.",3000)
			return
		end
		--- ADICIONAR AQUI A ANIMACAO 
		local random = math.random(100)
		if parseInt(random) >= 81 then
			vRP.giveInventoryItem(user_id,"pepitadeprata",math.random(5),true)
		elseif parseInt(random) >= 61 and parseInt(random) <= 80 then
			vRP.giveInventoryItem(user_id,"pepitadeouro",math.random(5),true)
		elseif parseInt(random) >= 41 and parseInt(random) <= 60 then
			vRP.giveInventoryItem(user_id,"copper",math.random(4),true)
		elseif parseInt(random) >= 26 and parseInt(random) <= 40 then
			vRP.giveInventoryItem(user_id,"aluminum",math.random(5),true)
		elseif parseInt(random) >= 10 and parseInt(random) <= 25 then
			vRP.giveInventoryItem(user_id,"pepitadebronze",math.random(5),true)
		end

		vRP.upgradeStress(user_id,1)
		saveList[parseInt(MineradorId)] = nil
		TriggerClientEvent("vrp_minerador:updateMineradorList",-1,saveList)
		TriggerClientEvent("vrp_minerador:removeMineradorBlips",-1,parseInt(MineradorId))
	end
end